# 低延迟改造验收清单

## 环境前提
- Windows 环境运行 `twist.py` 或 `twist.exe`
- 训练模式/自定义模式（避免网络抖动影响统计）
- 已用鼠标中键重新标定取色点

## 记录模板
- 每次测试记录：`成功/失败`、`失败原因`、`主观延迟是否可感知`
- 如需统计，复制控制台中 `抽牌成功` / `抽牌失败` 行

## 用例 1: 黄牌连续触发
1. 按 `E` 连续触发 50 次
2. 观察日志中的 `抽牌成功 color=黄`
3. 统计成功率、`lock=xxms` 的 P50/P95

通过标准：
- 成功率 >= 98%
- `lock` 延迟 P50 <= 80ms，P95 <= 140ms

## 用例 2: 大招二段落地黄牌
1. 在可稳定复现落地场景下触发 R 二段 30 次
2. 统计是否出现非黄牌锁定

通过标准：
- 错牌率 <= 1.5%

## 用例 3: 焦点切换保护
1. 抽牌过程中快速 Alt-Tab 切到其他窗口
2. 观察是否出现后台发键
3. 切回游戏后再次触发，确认可正常恢复

通过标准：
- 失焦时不会继续锁牌
- 恢复焦点后可正常工作

## 用例 4: CPU 占用
1. 开启脚本并在游戏中持续 5 分钟
2. 查看脚本进程 CPU 占用

通过标准：
- 常态额外占用目标 < 单核 8%
- 短时峰值可接受

## 失败原因说明
- `paused`: 手动暂停导致停止
- `inactive_window`: 当前活动窗口不是目标进程
- `timeout_no_match`: 在超时内没检测到目标色
- `timeout_no_confirm`: 检测到过单帧命中，但未达到连续确认帧数
